<div class="card p-4">
  <div class="card-body">

    {% if fields.field_publication_category is defined and fields.field_publication_category.content %}
      <div class="mb-3">
        <span class="badge bg-primary text-white rounded-pill small">{{ fields.field_publication_category.content }}</span>
      </div>
    {% endif %}

    {% if fields.title is defined and fields.title.content %}
      <h5 class="card-title mb-0">{{ fields.title.content }}</h5>
    {% endif %}

    {% if fields.field_publication_date is defined and (fields.field_publication_date.raw is not empty or fields.field_publication_date.content) %}
      <div class="text-muted small mb-1 mt-1">
        {{ fields.field_publication_date.raw is not empty ? (fields.field_publication_date.raw|date('d/m/Y')) : fields.field_publication_date.content }}
      </div>
    {% endif %}

    {% if fields.field_publication_file is defined and fields.field_publication_file.content %}
      {% set file_markup = fields.field_publication_file.content|render %}
      {% set file_href = (file_markup|split('href="')|length > 1) ? (file_markup|split('href="')[1]|split('"')[0]) : '' %}
      {% if file_href %}
        <a href="{{ file_href }}" class="text-decoration-none" target="_blank">
          <i class="fas fa-file-pdf me-2"></i>
          {{ 'Télécharger le document'|t }}
        </a>
      {% else %}
        <div class="mt-3">
          {{ fields.field_publication_file.content }}
        </div>
      {% endif %}
    {% endif %}
  </div>
</div>
